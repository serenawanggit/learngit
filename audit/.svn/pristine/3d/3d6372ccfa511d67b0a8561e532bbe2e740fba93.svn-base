<html xmlns="http://www.w3.org/1999/xhtml">
<%@ page contentType="text/html; charset=UTF-8"%>
<%@include file="/page/common/lib.jsp"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	
	<link rel="stylesheet" href="${chartCtx }/css/ASDSReport.css" type="text/css"></link>
	
	<script type="text/javascript" src="${chartCtx }/js/ASDSReport/ASDSReportFormat.js"></script>
	<script type="text/javascript" src="${chartCtx }/js/echarts/echarts-all.js"></script>
</head>

<body>
	<div class='loadding'><img src='${chartCtx}/images/lodding.gif'/></div>
	
	
		<div class="tb_box">
			<div class="tb_top">
				<div class="tb_title"><h4>教师队伍</h4>
				</div>
			</div>
			<div class="tb_main">
				<table id="table2-2">
					<thead>
						<tr>
							<td colspan="7">
								<h4 id="filename">2.2 教师队伍结构</h4>
								<div class="chocieYear">
									<ul>
										<li>年份：
											<select class="select_tips tb_select" id="year">
	<!-- 												<option>2014</option> -->
	<!-- 												<option>2013</option> -->
	<!-- 												<option>2012</option> -->
	<!-- 												<option>2011</option> -->
											</select>
										</li>
									</ul>
								</div>
							</td>
						</tr>
						<tr>
							<td rowspan="2" colspan="3">项目</td> 
							<td  colspan="2">专任教师</td> 
							<td  colspan="2">外聘教师</td>
						</tr>
						<tr>
							<td>数量</td>
							<td>比例(%)</td>
							<td>数量</td>
							<td>比例(%)</td>
						</tr>
					</thead>
					
					<tbody>
						<tr>
							<td colspan="3">总计</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td rowspan="9">职称</td>
							<td colspan="2">教授</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">副教授</td> 
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">讲师</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">助教</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">其他正高级</td> 
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">其他副高级</td> 
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">其他中级</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">其他初级</td> 
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">未评级</td> 
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td rowspan="4">最高学位</td> 
							<td colspan="2">博士</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">硕士</td> 
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">学士</td> 
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td  colspan="2">无学位</td> 
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td rowspan="4">年龄</td> 
							<td colspan="2">35岁及以下</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">36-45岁</td> 
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">46-55岁</td> 
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2">56岁及以上</td> 
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td rowspan="3">学缘</td>
							<td colspan="2">本校</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td rowspan="2">外校</td>
							<td >境内</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td >境外</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
					</tbody>
					
					<tfoot>
						<tr>
							<td colspan="7">
								<font color="red">※以上数据来源：表1-6-1教职工基本信息，表1-6-2外聘教师基本信息。<br/>
							【注】：<br/>
							1.“专任教师”指具有教师资格、专职从事教学工作的、只属于教学单位的人员。此处统计时不包括直属医院具有医师职称的医生。<br/>
							</font>
							</td>
						</tr>
					</tfoot>
				</table>
			</div>
		</div>
	<div id="table_2_2_bt_zc" style="border:1px solid #ccc;float: left;width:99%;height:400px;margin: 5px;"></div>
	
	<div id="table_2_2_bt_zgxw" style="border:1px solid #ccc;float: left;width:99%;height:400px;margin: 5px;"></div>
	
	<div id="table_2_2_bt_age" style="border:1px solid #ccc;float: left;width:99%;height:400px;margin: 5px;"></div>
	
	<div id="table_2_2_bt_xy" style="border:1px solid #ccc;float: left;width:99%;height:400px;margin: 5px;"></div>
	
	<script type="text/javascript">
		$(function(){
			formatEndYear("year");
			
			$("#year").change(function(){
				// show
				showLodding();
				$.ajax({
					async:false,
					url : "/CHART/qualityReport/qualityReport_ASDSGetListByYear.htm",
					type : "POST",
					data : {
						key : "ASDS_table2-2",
						year : $("#year").val()
					},
					success : function(data){
						var result = eval("("+data+")");
						if(result==""||result==null){
							hideLodding();
							$("#table2-2 tbody").html("<tr><td colspan=\"16\"><font color=\"red\"><b>该年份下没有数据</b></font></td></tr>");
							return;
						}
						// 总数
						$("#table2-2 tbody tr:eq(0) td:eq(1)").html(result[0][0]);
						$("#table2-2 tbody tr:eq(0) td:eq(2)").html('/');
						$("#table2-2 tbody tr:eq(0) td:eq(3)").html(result[0][41]);
						$("#table2-2 tbody tr:eq(0) td:eq(4)").html('/');
						
						//职称
						$("#table2-2 tbody tr:eq(1) td:eq(2)").html(result[0][1]);
						$("#table2-2 tbody tr:eq(1) td:eq(3)").html(valueFormat(result[0][2], 1));
						$("#table2-2 tbody tr:eq(2) td:eq(1)").html(result[0][3]);
						$("#table2-2 tbody tr:eq(2) td:eq(2)").html(valueFormat(result[0][4], 1));
						$("#table2-2 tbody tr:eq(3) td:eq(1)").html(result[0][5]);
						$("#table2-2 tbody tr:eq(3) td:eq(2)").html(valueFormat(result[0][6], 1));
						$("#table2-2 tbody tr:eq(4) td:eq(1)").html(result[0][7]);
						$("#table2-2 tbody tr:eq(4) td:eq(2)").html(valueFormat(result[0][8], 1));
						$("#table2-2 tbody tr:eq(5) td:eq(1)").html(result[0][9]);
						$("#table2-2 tbody tr:eq(5) td:eq(2)").html(valueFormat(result[0][10], 1));
						$("#table2-2 tbody tr:eq(6) td:eq(1)").html(result[0][11]);
						$("#table2-2 tbody tr:eq(6) td:eq(2)").html(valueFormat(result[0][12], 1));
						$("#table2-2 tbody tr:eq(7) td:eq(1)").html(result[0][13]);
						$("#table2-2 tbody tr:eq(7) td:eq(2)").html(valueFormat(result[0][14], 1));
						$("#table2-2 tbody tr:eq(8) td:eq(1)").html(result[0][15]);
						$("#table2-2 tbody tr:eq(8) td:eq(2)").html(valueFormat(result[0][16], 1));
						$("#table2-2 tbody tr:eq(9) td:eq(1)").html(result[0][17]);
						$("#table2-2 tbody tr:eq(9) td:eq(2)").html(valueFormat(result[0][18], 1));
						$("#table2-2 tbody tr:eq(10) td:eq(2)").html(result[0][19]);
						$("#table2-2 tbody tr:eq(10) td:eq(3)").html(valueFormat(result[0][20], 1));
						$("#table2-2 tbody tr:eq(11) td:eq(1)").html(result[0][21]);
						$("#table2-2 tbody tr:eq(11) td:eq(2)").html(valueFormat(result[0][22], 1));
						$("#table2-2 tbody tr:eq(12) td:eq(1)").html(result[0][23]);
						$("#table2-2 tbody tr:eq(12) td:eq(2)").html(valueFormat(result[0][24], 1));
						$("#table2-2 tbody tr:eq(13) td:eq(1)").html(result[0][25]);
						$("#table2-2 tbody tr:eq(13) td:eq(2)").html(valueFormat(result[0][26], 1));
						$("#table2-2 tbody tr:eq(14) td:eq(2)").html(result[0][27]);
						$("#table2-2 tbody tr:eq(14) td:eq(3)").html(valueFormat(result[0][28], 1));
						$("#table2-2 tbody tr:eq(15) td:eq(1)").html(result[0][29]);
						$("#table2-2 tbody tr:eq(15) td:eq(2)").html(valueFormat(result[0][30], 1));
						$("#table2-2 tbody tr:eq(16) td:eq(1)").html(result[0][31]);
						$("#table2-2 tbody tr:eq(16) td:eq(2)").html(valueFormat(result[0][32], 1));
						$("#table2-2 tbody tr:eq(17) td:eq(1)").html(result[0][33]);
						$("#table2-2 tbody tr:eq(17) td:eq(2)").html(valueFormat(result[0][34], 1));
						$("#table2-2 tbody tr:eq(18) td:eq(2)").html(result[0][35]);
						$("#table2-2 tbody tr:eq(18) td:eq(3)").html(valueFormat(result[0][36], 1));
						$("#table2-2 tbody tr:eq(19) td:eq(2)").html(result[0][37]);
						$("#table2-2 tbody tr:eq(19) td:eq(3)").html(valueFormat(result[0][38], 1));
						$("#table2-2 tbody tr:eq(20) td:eq(1)").html(result[0][39]);
						$("#table2-2 tbody tr:eq(20) td:eq(2)").html(valueFormat(result[0][40], 1));
						
						
						$("#table2-2 tbody tr:eq(1) td:eq(4)").html(result[0][42]);
						$("#table2-2 tbody tr:eq(1) td:eq(5)").html(valueFormat(result[0][43], 1));
						$("#table2-2 tbody tr:eq(2) td:eq(3)").html(result[0][44]);
						$("#table2-2 tbody tr:eq(2) td:eq(4)").html(valueFormat(result[0][45], 1));
						$("#table2-2 tbody tr:eq(3) td:eq(3)").html(result[0][46]);
						$("#table2-2 tbody tr:eq(3) td:eq(4)").html(valueFormat(result[0][47], 1));
						$("#table2-2 tbody tr:eq(4) td:eq(3)").html(result[0][48]);
						$("#table2-2 tbody tr:eq(4) td:eq(4)").html(valueFormat(result[0][49], 1));
						$("#table2-2 tbody tr:eq(5) td:eq(3)").html(result[0][50]);
						$("#table2-2 tbody tr:eq(5) td:eq(4)").html(valueFormat(result[0][51], 1));
						$("#table2-2 tbody tr:eq(6) td:eq(3)").html(result[0][52]);
						$("#table2-2 tbody tr:eq(6) td:eq(4)").html(valueFormat(result[0][53], 1));
						$("#table2-2 tbody tr:eq(7) td:eq(3)").html(result[0][54]);
						$("#table2-2 tbody tr:eq(7) td:eq(4)").html(valueFormat(result[0][55], 1));
						$("#table2-2 tbody tr:eq(8) td:eq(3)").html(result[0][56]);
						$("#table2-2 tbody tr:eq(8) td:eq(4)").html(valueFormat(result[0][57], 1));
						$("#table2-2 tbody tr:eq(9) td:eq(3)").html(result[0][58]);
						$("#table2-2 tbody tr:eq(9) td:eq(4)").html(valueFormat(result[0][59], 1));
						//最高学位
						$("#table2-2 tbody tr:eq(10) td:eq(4)").html(result[0][60]);
						$("#table2-2 tbody tr:eq(10) td:eq(5)").html(valueFormat(result[0][61], 1));
						$("#table2-2 tbody tr:eq(11) td:eq(3)").html(result[0][62]);
						$("#table2-2 tbody tr:eq(11) td:eq(4)").html(valueFormat(result[0][63], 1));
						$("#table2-2 tbody tr:eq(12) td:eq(3)").html(result[0][64]);
						$("#table2-2 tbody tr:eq(12) td:eq(4)").html(valueFormat(result[0][65], 1));
						$("#table2-2 tbody tr:eq(13) td:eq(3)").html(result[0][66]);
						$("#table2-2 tbody tr:eq(13) td:eq(4)").html(valueFormat(result[0][67], 1));
						//年龄
						$("#table2-2 tbody tr:eq(14) td:eq(4)").html(result[0][68]);
						$("#table2-2 tbody tr:eq(14) td:eq(5)").html(valueFormat(result[0][69], 1));
						$("#table2-2 tbody tr:eq(15) td:eq(3)").html(result[0][70]);
						$("#table2-2 tbody tr:eq(15) td:eq(4)").html(valueFormat(result[0][71], 1));
						$("#table2-2 tbody tr:eq(16) td:eq(3)").html(result[0][72]);
						$("#table2-2 tbody tr:eq(16) td:eq(4)").html(valueFormat(result[0][73], 1));
						$("#table2-2 tbody tr:eq(17) td:eq(3)").html(result[0][74]);
						$("#table2-2 tbody tr:eq(17) td:eq(4)").html(valueFormat(result[0][75], 1));
						
						
						//学员
						$("#table2-2 tbody tr:eq(18) td:eq(4)").html("0");
						$("#table2-2 tbody tr:eq(18) td:eq(5)").html("0.00");
						$("#table2-2 tbody tr:eq(19) td:eq(4)").html("0");
						$("#table2-2 tbody tr:eq(19) td:eq(5)").html("0.00");
						$("#table2-2 tbody tr:eq(20) td:eq(3)").html("0");
						$("#table2-2 tbody tr:eq(20) td:eq(4)").html("0.00");
						
						
						hideLodding();
					},
					error : function(){
						hideLodding();alert("系统忙，请稍后重试！！！");
					}
				});
				myInit();
			});
			
			// 调用方法
			$("#year").change();
			myInit();
		});
		var table_2_2_bt_zc,table_2_2_bt_zgxw,table_2_2_bt_age,table_2_2_bt_xy;
		var record1 = {};
		var record2 = {};
		var record3 = {};
		var record4 = {};
		var record5 = {};
		var record6 = {};
		var record7 = {};
		var record8 = {};
		var record9 = {};
		function myInit(){
			table_2_2_bt_zc = echarts.init(document.getElementById("table_2_2_bt_zc"));
			table_2_2_bt_zgxw = echarts.init(document.getElementById("table_2_2_bt_zgxw"));
			table_2_2_bt_age = echarts.init(document.getElementById("table_2_2_bt_age"));
			table_2_2_bt_xy = echarts.init(document.getElementById("table_2_2_bt_xy"));
			
			init();// echarts控件初始化后初始化页面数据
			
			getImg(table_2_2_bt_zc.getDataURL("png"),"table_2_2_zc_img.png");//获取图片
			getImg(table_2_2_bt_zgxw.getDataURL("png"),"table_2_2_zgxw_img.png");//获取图片
			getImg(table_2_2_bt_age.getDataURL("png"),"table_2_2_age_img.png");//获取图片
			getImg(table_2_2_bt_xy.getDataURL("png"),"table_2_2_xy_img.png");//获取图片
		}
		//初始化数据
		function init(){
			table_2_2_bt_zc.setOption(getRadarOption_zc("/CHART/qualityReport/qualityReport_ASDSGetListByYear.htm"));
			table_2_2_bt_zgxw.setOption(getRadarOption_zgxw("/CHART/qualityReport/qualityReport_ASDSGetListByYear.htm"));
			table_2_2_bt_age.setOption(getRadarOption_age("/CHART/qualityReport/qualityReport_ASDSGetListByYear.htm"));
			table_2_2_bt_xy.setOption(getRadarOption_xy("/CHART/qualityReport/qualityReport_ASDSGetListByYear.htm"));
	}

function getImg(img,fileName){
	$.ajax({
		async:false,
		url : "/CHART/GetASDSR_Table_Img",
		type : "POST",
		data : {"img_Base64":img,"img_Name": fileName},
		error:function(){
			alert("save img error.");
		}
	});
}
//请求数据
function getRadarOption_zc(url){
	table_2_2_bt_zc.clear();
	$.ajax({
		url : url,
		type : "POST",
		data : {
			key : "ASDS_table2-2-qy-zc",
			year : $("#year").val()
		},
		async:false,
		success : function(data){
			var result = eval("("+data+")");
//			console.info("职称:"+result);
			record1.value = result[0][0];
			record1.name = '教授';
			
			record2.value = result[0][1];
			record2.name = '副教授';
			
			record3.value = result[0][2];
			record3.name = '讲师';
			
			record4.value = result[0][3];
			record4.name = '助教';

			record5.value = result[0][4];
			record5.name = '其他正高级';
			
			record6.value = result[0][5];
			record6.name = '其他副高级';
			
			record7.value = result[0][6];
			record7.name = '其他中级';
			
			record8.value = result[0][7];
			record8.name = '其他初级';
			
			record9.value = result[0][8];
			record9.name = '未评级';
			
			option.series[0].data=[record1,record2,record3,record4,record5,record6,record7,record8,record9];
			option.title.text ="职称";
			option.series.name="职称";
			option.legend.data=['教授','副教授','讲师','助教','其他正高级','其他副高级','其他中级','其他初级','未评级']
		},
		error:function(){
			alert("echarts:500 - asds_2-2-bt-zc_echarts.js");
		}
	});
	return option;
}

function getRadarOption_zgxw(url){
	table_2_2_bt_zgxw.clear();
	$.ajax({
		url : url,
		type : "POST",
		data : {
			key : "ASDS_table2-2-qy-zgxw",
			year : $("#year").val()
		},
		async:false,
		success : function(data){
			var result = eval("("+data+")");
//			console.info("最高学位:"+result);
			record1.value = result[0][0];
			record1.name = '博士学位教师数';
			
			record2.value = result[0][1];
			record2.name = '硕士学位教师数';
			
			record3.value = result[0][2];
			record3.name = '学士学位教师数';
			
			record4.value = result[0][3];
			record4.name = '无学位教师数';
			
			option.series[0].data=[record1,record2,record3,record4];
			option.title.text="最高学位";
			option.series.name="最高学位";
			option.legend.data=['博士学位教师数','硕士学位教师数','学士学位教师数','无学位教师数']
			
		},
		error:function(){
			alert("echarts:500 - asds_2-2-bt-zgxw_echarts.js");
		}
	});
	return option;
}

function getRadarOption_age(url){
	table_2_2_bt_age.clear();
	$.ajax({
		url : url,
		type : "POST",
		data : {
			key : "ASDS_table2-2-qy-age",
			year : $("#year").val()
		},
		async:false,
		success : function(data){
			var result = eval("("+data+")");
//			console.info("年龄:"+result);
			record1.value = result[0][0];
			record1.name = '35岁及以下教师数';
			
			record2.value = result[0][1];
			record2.name = '专任教师36-45岁教师数';
			
			record3.value = result[0][2];
			record3.name = '专任教师46-55岁教师数';
			
			record4.value = result[0][3];
			record4.name = '专任教师56岁以上教师数';
			
			option.series[0].data=[record1,record2,record3,record4];
			option.title.text="年龄";
			option.series.name="年龄";
			option.legend.data=['35岁及以下教师数','专任教师36-45岁教师数','专任教师46-55岁教师数','专任教师56岁以上教师数']
		},
		error:function(){
			alert("echarts:500 - asds_2-2-bt-age_echarts.js");
		}
	});
	return option;
}

function getRadarOption_xy(url){
	table_2_2_bt_xy.clear();
	$.ajax({
		url : url,
		type : "POST",
		data : {
			key : "ASDS_table2-2-qy-xy",
			year : $("#year").val()
		},
		async:false,
		success : function(data){
			var result = eval("("+data+")");
//			console.info("学缘:"+result);
			record1.value = result[0][0];
			record1.name = '本校学缘教师数';
			
			record2.value = result[0][1];
			record2.name = '外校(境内)学缘教师数';
			
			record3.value = result[0][2];
			record3.name = '外校(境外)学缘教师数';
			
			option.series[0].data=[record1,record2,record3];
			option.title.text="学缘";
			option.series.name="学缘";
			option.legend.data=['本校学缘教师数','外校(境内)学缘教师数','外校(境外)学缘教师数']
		},
		error:function(){
			alert("echarts:500 - asds_2-2-bt-xy_echarts.js");
		}
	});
	return option;
}

var option = {
    title : {
        text: '职称',
    	x:'center'
    },
    tooltip : {
        trigger: 'item',
        formatter: "{a} <br/>{b} : {c} ({d}%)"
    },
    legend: {
        orient : 'vertical',
        x : 'left',
        data:[]
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            magicType : {
                show: true, 
                type: ['pie', 'funnel'],
                option: {
                    funnel: {
                        x: '25%',
                        width: '50%',
                        funnelAlign: 'left',
                        max: 1548
                    }
                }
            },
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    animation:false,
    calculable : true,
    series : [
        {
            name:'',
            type:'pie',
            radius : '55%',
            center: ['50%', '60%'],
            data:[
            ],
            itemStyle: {
                normal: {
                    label: {
                        show: true,
                        formatter: "{b} : {c} ({d}%)"
                    }
                }
            }
        }
    ]
};
	</script>
</body>
</html>
